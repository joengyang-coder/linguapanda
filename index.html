<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinguaPanda - è‡ªç„¶ä¸‡ç‰©å®Œæ•´ç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <style>
        :root { --panda-green: #4CAF50; --bg-cream: #FFFDF5; --accent-orange: #FF5722; }
        body { font-family: 'Helvetica Neue', Arial, sans-serif; background-color: var(--bg-cream); margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        /* å¯¼èˆªæ  */
        #header { width: 100%; padding: 15px 30px; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; box-sizing: border-box; position: sticky; top: 0; z-index: 100; }
        #logo { font-size: 20px; font-weight: bold; color: #333; }
        #progress { font-weight: bold; color: var(--panda-green); background: #f0fdf0; padding: 5px 15px; border-radius: 20px; }

        /* ä¸»å®¹å™¨ */
        #main-container { display: flex; flex-direction: column; align-items: center; padding: 20px; width: 100%; max-width: 800px; }

        /* å­¦ä¹ åŒºåŸŸå¸ƒå±€ */
        #learning-box { display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; width: 100%; margin-top: 20px; }

        /* å·¦ä¾§ï¼šææ‘¹æ¿ */
        #writer-card { background: white; border-radius: 25px; padding: 25px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); border: 4px solid #f0f0f0; transition: border-color 0.3s; }
        #writer-card.active { border-color: var(--panda-green); }
        #char-header { text-align: center; margin-bottom: 15px; }
        #pinyin-text { font-size: 32px; color: var(--accent-orange); font-weight: bold; letter-spacing: 2px; }

        /* å³ä¾§ï¼šç†ŠçŒ«äº’åŠ¨ */
        #panda-zone { width: 300px; display: flex; flex-direction: column; align-items: center; }
        #panda-avatar { width: 180px; filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1)); transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        #speech-bubble { background: white; border-radius: 20px; padding: 18px; margin-top: 20px; border: 3px solid var(--panda-green); position: relative; font-size: 16px; line-height: 1.5; color: #444; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        #speech-bubble::after { content: ''; position: absolute; top: -15px; left: 50%; transform: translateX(-50%); border-left: 15px solid transparent; border-right: 15px solid transparent; border-bottom: 15px solid var(--panda-green); }

        /* æµ‹è¯•åŒº */
        #quiz-container { display: none; width: 100%; margin-top: 30px; text-align: center; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        #quiz-q { font-size: 18px; font-weight: bold; color: #333; margin-bottom: 15px; }
        .quiz-option { background: white; border: 2px solid #eee; border-radius: 12px; padding: 15px 30px; cursor: pointer; margin: 8px; font-size: 24px; transition: 0.2s; min-width: 80px; }
        .quiz-option:hover { border-color: var(--panda-green); transform: translateY(-2px); box-shadow: 0 5px 10px rgba(0,0,0,0.1); }
        
        /* åº•éƒ¨æ§åˆ¶ */
        #controls { margin-top: 40px; }
        .btn-reset { background: #eee; border: none; padding: 10px 20px; border-radius: 10px; cursor: pointer; color: #666; font-size: 14px; }
    </style>
</head>
<body>

<div id="header">
    <div id="logo">ğŸ¼ LinguaPanda</div>
    <div id="progress">è‡ªç„¶ä¸‡ç‰©: <span id="cur-idx">1</span> / 31</div>
</div>

<div id="main-container">
    <div id="learning-box">
        <div id="writer-card">
            <div id="char-header"><span id="pinyin-text">rÃ¬</span></div>
            <div id="character-target"></div>
        </div>

        <div id="panda-zone">
            <img id="panda-avatar" src="https://img.icons8.com/color/180/panda.png" alt="Panda">
            <div id="speech-bubble">ä½ å¥½ï¼æˆ‘æ˜¯ç†ŠçŒ«è€å¸ˆï¼Œç‚¹å‡»æ±‰å­—å¼€å§‹ææ‘¹å§ï¼</div>
        </div>
    </div>

    <div id="quiz-container">
        <div id="quiz-q">å“ªä¸ªæ˜¯è¿™ä¸ªå­—ï¼Ÿ</div>
        <div id="quiz-btns"></div>
    </div>

    <div id="controls">
        <button class="btn-reset" onclick="resetCurrentStroke()">é‡å†™æœ¬å­—</button>
    </div>
</div>

<script>
    // å®Œæ•´çš„ 31 ä¸ªè‡ªç„¶å…³å¡æ•°æ®åº“
    const natureLevels = [
        { char: "æ—¥", pinyin: "rÃ¬", speech: "RÃ¬ï¼å¤ªé˜³å…¬å…¬å‡ºæ¥å•¦ï¼Œç…§å¾—å…¨èº«æš–æ´‹æ´‹ï¼", quiz: "å“ªä¸ªå­—æ˜¯â€˜æ—¥â€™ï¼Ÿ", options: ["æ—¥", "ç›®", "å£"], correct: "æ—¥" },
        { char: "æœˆ", pinyin: "yuÃ¨", speech: "YuÃ¨ï¼æœˆäº®å°èˆ¹æ‘‡å‘€æ‘‡ï¼Œå°æœ‹å‹ä»¬å¿«ç¡è§‰ã€‚", quiz: "å“ªä¸ªå­—æ˜¯â€˜æœˆâ€™ï¼Ÿ", options: ["æœˆ", "ç”¨", "ä¸”"], correct: "æœˆ" },
        { char: "å±±", pinyin: "shÄn", speech: "ShÄnï¼å¤§å±±é«˜é«˜çš„ï¼Œæˆ‘ä»¬è¦ä¸€èµ·å»çˆ¬å±±å—ï¼Ÿ", quiz: "å“ªä¸ªå­—æ˜¯â€˜å±±â€™ï¼Ÿ", options: ["å±±", "å‡º", "å‡¶"], correct: "å±±" },
        { char: "æ°´", pinyin: "shuÇ", speech: "ShuÇï¼æ¸…æ¸…çš„æ°´æ´—æ´—è„¸ï¼Œå‡‰å‡‰çš„çœŸèˆ’æœï¼", quiz: "å“ªä¸ªæ˜¯â€˜æ°´â€™ï¼Ÿ", options: ["æ°´", "å†°", "æ°¸"], correct: "æ°´" },
        { char: "ç«", pinyin: "huÇ’", speech: "HuÇ’ï¼ç«å †çº¢çº¢çš„ï¼Œå–æš–åˆ«ä¼¸æ‰‹å“¦ï¼", quiz: "å“ªä¸ªæ˜¯â€˜ç«â€™ï¼Ÿ", options: ["ç«", "ç¯", "ç­"], correct: "ç«" },
        { char: "äº‘", pinyin: "yÃºn", speech: "YÃºnï¼ç™½äº‘ç™½ç™½çš„ï¼Œåƒä¸åƒè½¯è½¯çš„æ£‰èŠ±ç³–ï¼Ÿ", quiz: "å“ªä¸ªæ˜¯â€˜äº‘â€™ï¼Ÿ", options: ["äº‘", "å»", "ä¼š"], correct: "äº‘" },
        { char: "é›¨", pinyin: "yÇ”", speech: "YÇ”ï¼ä¸‹é›¨å•¦ï¼Œå°èŠ±å°è‰å–æ°´å–å¾—çœŸå¼€å¿ƒï¼", quiz: "å“ªä¸ªæ˜¯â€˜é›¨â€™ï¼Ÿ", options: ["é›¨", "ä¸¤", "é›ª"], correct: "é›¨" },
        { char: "çŸ³", pinyin: "shÃ­", speech: "ShÃ­ï¼çŸ³å¤´ç¡¬é‚¦é‚¦ï¼Œå¯ä»¥ç”¨æ¥ç›–æˆ¿å­ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜çŸ³â€™ï¼Ÿ", options: ["çŸ³", "å³", "å"], correct: "çŸ³" },
        { char: "ç”°", pinyin: "tiÃ¡n", speech: "TiÃ¡nï¼ç”°é‡Œé•¿æ»¡äº†é¦™å–·å–·çš„ç±³é¥­ï¼", quiz: "å“ªä¸ªæ˜¯â€˜ç”°â€™ï¼Ÿ", options: ["ç”°", "å£", "ç”±"], correct: "ç”°" },
        { char: "åœŸ", pinyin: "tÇ”", speech: "TÇ”ï¼æ³¥åœŸé‡Œä½ç€å¥½æœ‹å‹ï¼Œå°ç«¹ç¬‹ä¹Ÿåœ¨è¿™é‡Œé•¿ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜åœŸâ€™ï¼Ÿ", options: ["åœŸ", "å£«", "å¹²"], correct: "åœŸ" },
        { char: "ç¦¾", pinyin: "hÃ©", speech: "HÃ©ï¼ç¦¾è‹—é•¿é«˜äº†ï¼Œç§‹å¤©å°±æœ‰å¥½åƒçš„å•¦ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜ç¦¾â€™ï¼Ÿ", options: ["ç¦¾", "æœ¨", "æœ¬"], correct: "ç¦¾" },
        { char: "æœ¨", pinyin: "mÃ¹", speech: "MÃ¹ï¼å¤§æ ‘å°±åƒä¸€æŠŠä¼ï¼Œå¸®æˆ‘ä»¬é®å¤ªé˜³ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜æœ¨â€™ï¼Ÿ", options: ["æœ¨", "æœ¬", "æœ¯"], correct: "æœ¨" },
        { char: "ç«¹", pinyin: "zhÃº", speech: "ZhÃºï¼æˆ‘æœ€å–œæ¬¢ç¿ ç»¿çš„ç«¹å­ï¼Œå®ƒæ˜¯æˆ‘çš„å¥½æœ‹å‹ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜ç«¹â€™ï¼Ÿ", options: ["ç«¹", "ç¬”", "ç®€"], correct: "ç«¹" },
        { char: "ç”µ", pinyin: "diÃ n", speech: "DiÃ nï¼é—ªç”µäº®äº®ï¼Œé›·å£°å“å“ï¼Œå¿«èº²è¿›å±‹é‡Œã€‚", quiz: "å“ªä¸ªæ˜¯â€˜ç”µâ€™ï¼Ÿ", options: ["ç”µ", "ç”°", "ç”²"], correct: "ç”µ" },
        { char: "é£", pinyin: "fÄ“ng", speech: "FÄ“ngï¼å¤§é£å‘¼å‘¼å«ï¼Œå¹å¾—æˆ‘éƒ½è¦é£èµ·æ¥å•¦ï¼", quiz: "å“ªä¸ªæ˜¯â€˜é£â€™ï¼Ÿ", options: ["é£", "å‡¤", "å†ˆ"], correct: "é£" },
        { char: "å¤©", pinyin: "tiÄn", speech: "TiÄnï¼è“è“çš„å¤©ç©ºçœŸå¤§ï¼Œé£ç€å¥½å¤šå°é¸Ÿã€‚", quiz: "å“ªä¸ªæ˜¯â€˜å¤©â€™ï¼Ÿ", options: ["å¤©", "å¤­", "å¤§"], correct: "å¤©" },
        { char: "åœ°", pinyin: "dÃ¬", speech: "DÃ¬ï¼å¤§åœ°åšåšçš„ï¼Œæ‰¿è½½ç€ä¸‡ç‰©ç”Ÿé•¿ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜åœ°â€™ï¼Ÿ", options: ["åœ°", "ä»–", "æ± "], correct: "åœ°" },
        { char: "æ˜Ÿ", pinyin: "xÄ«ng", speech: "XÄ«ngï¼æ˜Ÿæ˜Ÿçœ¨çœ¼ç›ï¼Œæ˜¯åœ¨å’Œæˆ‘ä»¬æ‰“æ‹›å‘¼å—ï¼Ÿ", quiz: "å“ªä¸ªæ˜¯â€˜æ˜Ÿâ€™ï¼Ÿ", options: ["æ˜Ÿ", "é‡Œ", "æ—©"], correct: "æ˜Ÿ" },
        { char: "å…‰", pinyin: "guÄng", speech: "GuÄngï¼æœ‰å…‰çš„åœ°æ–¹å°±äº®æ™¶æ™¶ï¼Œä¸æ€•å¤©é»‘ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜å…‰â€™ï¼Ÿ", options: ["å…‰", "å…ƒ", "å…ˆ"], correct: "å…‰" },
        { char: "é›ª", pinyin: "xuÄ›", speech: "XuÄ›ï¼ä¸‹é›ªå•¦ï¼Œæˆ‘ä»¬ä¸€èµ·å»å †é›ªäººå§ï¼", quiz: "å“ªä¸ªæ˜¯â€˜é›ªâ€™ï¼Ÿ", options: ["é›ª", "é›·", "éœ²"], correct: "é›ª" },
        { char: "å†°", pinyin: "bÄ«ng", speech: "BÄ«ngï¼å†°é¢æ»‘æ»‘çš„ï¼Œèµ°è·¯è¦å°å¿ƒå“¦ï¼", quiz: "å“ªä¸ªæ˜¯â€˜å†°â€™ï¼Ÿ", options: ["å†°", "æ°´", "å†³"], correct: "å†°" },
        { char: "æ²™", pinyin: "shÄ", speech: "ShÄï¼å°å°çš„æ²™å­å †æˆå±±ï¼ŒçœŸå¥½ç©ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜æ²™â€™ï¼Ÿ", options: ["æ²™", "æ²³", "æ´—"], correct: "æ²™" },
        { char: "æ²³", pinyin: "hÃ©", speech: "HÃ©ï¼æ²³æ°´æµå‘è¿œæ–¹ï¼Œå¸¦èµ°äº†æˆ‘çš„å°èˆ¹ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜æ²³â€™ï¼Ÿ", options: ["æ²³", "ä½•", "æ¸´"], correct: "æ²³" },
        { char: "æµ·", pinyin: "hÇi", speech: "HÇiï¼å¤§æµ·è“è“çš„ï¼Œé‡Œé¢ä½ç€å¥½å¤šå°é±¼ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜æµ·â€™ï¼Ÿ", options: ["æµ·", "æ¯", "æ‚”"], correct: "æµ·" },
        { char: "è‰", pinyin: "cÇo", speech: "CÇoï¼ç»¿ç»¿çš„å°è‰è½¯ç»µç»µï¼Œèººç€çœŸèˆ’æœã€‚", quiz: "å“ªä¸ªæ˜¯â€˜è‰â€™ï¼Ÿ", options: ["è‰", "æ—©", "è‹¦"], correct: "è‰" },
        { char: "èŠ±", pinyin: "huÄ", speech: "HuÄï¼èŠ±å„¿çº¢çº¢çš„ï¼Œé—»èµ·æ¥é¦™å–·å–·ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜èŠ±â€™ï¼Ÿ", options: ["èŠ±", "å", "åŒ–"], correct: "èŠ±" },
        { char: "æ ‘", pinyin: "shÃ¹", speech: "ShÃ¹ï¼æ ‘æœ¨é•¿æˆæ£®æ—ï¼Œæ˜¯æˆ‘ä»¬å¤§å®¶çš„å®¶ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜æ ‘â€™ï¼Ÿ", options: ["æ ‘", "æ‘", "å¯¹"], correct: "æ ‘" },
        { char: "æ—", pinyin: "lÃ­n", speech: "LÃ­nï¼åŒæœ¨æˆæ—ï¼Œæ£®æ—é‡Œç©ºæ°”çœŸæ¸…æ–°ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜æ—â€™ï¼Ÿ", options: ["æ—", "æ£®", "æœ¨"], correct: "æ—" },
        { char: "æœ", pinyin: "guÇ’", speech: "GuÇ’ï¼ç§‹å¤©ç»“æœå­ï¼Œç”œç”œçš„æœå­çœŸå¥½åƒã€‚", quiz: "å“ªä¸ªæ˜¯â€˜æœâ€™ï¼Ÿ", options: ["æœ", "é‡Œ", "è¯¾"], correct: "æœ" },
        { char: "å¶", pinyin: "yÃ¨", speech: "YÃ¨ï¼å¶å­å˜é»„äº†ï¼Œå†¬å¤©å¿«è¦æ¥äº†ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜å¶â€™ï¼Ÿ", options: ["å¶", "å", "å£"], correct: "å¶" },
        { char: "è‹—", pinyin: "miÃ¡o", speech: "MiÃ¡oï¼å°è‹—å¿«å¿«é•¿ï¼Œé•¿å¤§å˜æˆå¤§æ¤ç‰©ã€‚", quiz: "å“ªä¸ªæ˜¯â€˜è‹—â€™ï¼Ÿ", options: ["è‹—", "äº©", "çŒ«"], correct: "è‹—" }
    ];

    let currentIdx = 0;
    let writer;

    // åˆå§‹åŒ–å…³å¡
    function startLevel(index) {
        const data = natureLevels[index];
        
        // æ›´æ–° UI æ–‡æœ¬
        document.getElementById("pinyin-text").innerText = data.pinyin;
        document.getElementById("cur-idx").innerText = index + 1;
        document.getElementById("speech-bubble").innerText = `è·Ÿæˆ‘ä¸€èµ·å†™â€œ${data.char}â€å­—å§ï¼`;
        document.getElementById("quiz-container").style.display = "none";
        document.getElementById("character-target").innerHTML = "";
        
        // é‡ç½®ç†ŠçŒ«åŠ¨ä½œ
        const panda = document.getElementById("panda-avatar");
        panda.style.transform = "scale(1) rotate(0deg)";

        // åˆå§‹åŒ–ææ‘¹æ’ä»¶ (Hanzi Writer)
        writer = HanziWriter.create('character-target', data.char, {
            width: 280,
            height: 280,
            padding: 10,
            showOutline: true,
            strokeColor: '#4CAF50',
            outlineColor: '#DDD',
            drawingColor: '#333'
        });

        // å¼€å¯æµ‹è¯•æ¨¡å¼
        writer.quiz({
            onComplete: function() {
                handleTraceSuccess();
            }
        });
    }

    // ææ‘¹å®Œæˆé€»è¾‘
    function handleTraceSuccess() {
        const data = natureLevels[currentIdx];
        const bubble = document.getElementById("speech-bubble");
        const panda = document.getElementById("panda-avatar");

        // ç†ŠçŒ«ç»™å‡ºåé¦ˆ
        bubble.innerText = data.speech;
        panda.style.transform = "scale(1.2) rotate(10deg)";

        // å»¶è¿Ÿå±•ç¤ºé€‰æ‹©é¢˜
        setTimeout(() => {
            showQuiz(data);
        }, 1800);
    }

    // å±•ç¤ºå°æµ‹è¯•
    function showQuiz(data) {
        const container = document.getElementById("quiz-container");
        const btnBox = document.getElementById("quiz-btns");
        
        container.style.display = "block";
        document.getElementById("quiz-q").innerText = data.quiz;
        btnBox.innerHTML = "";

        data.options.forEach(opt => {
            const btn = document.createElement("button");
            btn.className = "quiz-option";
            btn.innerText = opt;
            btn.onclick = () => verifyChoice(opt, data.correct);
            btnBox.appendChild(btn);
        });
    }

    // éªŒè¯ç­”æ¡ˆå¹¶åˆ‡å…³
    function verifyChoice(choice, correct) {
        if (choice === correct) {
            currentIdx++;
            if (currentIdx < natureLevels.length) {
                startLevel(currentIdx);
            } else {
                alert("ğŸ‰ å¤ªæ£’äº†ï¼ä½ å·²ç»å®Œæˆäº†â€˜è‡ªç„¶ä¸‡ç‰©â€™çš„æ‰€æœ‰å­¦ä¹ ï¼");
                currentIdx = 0; // å¾ªç¯
                startLevel(0);
            }
        } else {
            document.getElementById("speech-bubble").innerText = "å“å‘€ï¼Œä¸å¯¹å“¦ï¼Œå†ä»”ç»†æ‰¾æ‰¾çœ‹ï¼Ÿ";
            const panda = document.getElementById("panda-avatar");
            panda.style.transform = "translateX(10px) rotate(-5deg)";
            setTimeout(() => panda.style.transform = "scale(1)", 500);
        }
    }

    function resetCurrentStroke() {
        startLevel(currentIdx);
    }

    // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨å¼€å§‹
    window.onload = () => startLevel(0);
</script>

</body>
</html>



